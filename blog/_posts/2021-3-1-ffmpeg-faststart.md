---
date: 2021-03-01
tag: 
  - メモ
  - FFmpeg
author: Osumi Akari
---
# FFmpegを使って、ネットワーク上でも快適再生可能な動画ファイルを作る
FFmpegを使用し、MP4ファイル内の「moov」を先頭に持ってくることによって、プログレッシブダウンロードをより簡易に実現します。

## What's "moov"?
MP4ファイルの内部には単にメディアデータが含まれているのではなく、それらの他にもファイルタイプを示す部分やメタデータが含まれている部分が存在します。これらの部分をそれぞれ「Box」といい、それらのうちメタデータを含んでいるものを「moov」といいます。

「メタデータ」と聞くと大したものではないかもしれません。しかしこのメタデータを読み込まないと動画そのものの再生ができません。すなわち転送速度が遅いネットワークにおいて動画を共有する場合において、この「moov」が読み込まれるまでの間、ずっと読み込み中となってしまいます。

## コマンド
```bash
ffmpeg -i input.mp4 -movflags +faststart output.mp4
```

## 参考サイト
* [profile？atom？mp4のよくわからないあれこれ（atom編) ](http://yebisupress.dac.co.jp/2015/11/04/profile%EF%BC%9Fatom%EF%BC%9Fmp4%E3%81%AE%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84%E3%81%82%E3%82%8C%E3%81%93%E3%82%8C%EF%BC%88atom%E7%B7%A8/)